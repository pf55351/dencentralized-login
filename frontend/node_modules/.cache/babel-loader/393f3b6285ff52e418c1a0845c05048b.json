{"ast":null,"code":"var _jsxFileName = \"/Users/francescoprimerano/Desktop/metamask-login/frontend/src/App.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useCallback } from \"react\";\nimport \"bulma/css/bulma.min.css\";\nimport { Container, Heading, Content, Button, Image } from \"react-bulma-components\";\nimport Hero from \"react-bulma-components/esm/components/hero\";\nimport Footer from \"react-bulma-components/cjs/components/footer\";\nimport logo from \"./metamask.svg\";\nimport Web3 from \"web3\";\nimport Modal from \"./Modal\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const [isLoading, setIsLoading] = useState(false);\n  const [ethAddress, setEthAddress] = useState(\"\");\n  const [fieldsModal, setFieldsModal] = useState(undefined);\n  let web3 = new Web3(Web3.givenProvider);\n\n  const hasMetamask = () => {\n    const provider = web3.currentProvider;\n\n    if (provider && provider === window.ethereum && provider.isMetaMask) {\n      console.log(\"MetaMask is installed!\");\n      return true;\n    } else {\n      return false;\n    }\n  };\n  /*\n  const handlerClik =  useCallback(async(e) => {\n    e.preventDefault();\n    if (hasMetamask()) {\n      console.log(\"OK METAMASK\");\n      console.log(web3.eth.accounts[0]);\n      const accounts = await web3.eth.getAccounts()\n      console.log(accounts[0])\n      web3.eth.personal\n        .sign(\n          web3.utils.utf8ToHex(\"Hello world\"),\n          \"0x11f4d0A3c12e86B4b5F39B213F7E19D048276DAe\",\n          \"test password!\"\n        )\n        .then(console.log);\n    } else {\n      setFieldsModal({\n        success: \"false\",\n        danger: \"true\",\n        title: \"No Metamask Extension Founded\",\n        body: \"Please install Metamask extension\",\n        show: \"true\",\n        btnType: \"danger\",\n      });\n    }\n  }, []);\n  */\n\n\n  const handlerClik = useCallback(async e => {\n    e.preventDefault();\n\n    if (hasMetamask()) {\n      window.ethereum.enable;\n      const accounts = await web3.eth.getAccounts();\n      console.log(accounts); // equivalente di web3.eth.personal.sign\n      // web3.eth.personal.sign chiama questa fx\n\n      window.ethereum.sendAsync({\n        method: 'personal_sign',\n        params: [web3.utils.utf8ToHex('Hello world'), accounts[0]],\n        from: accounts[0]\n      }, (_err, {\n        result\n      }) => _err ? console.error(_err) : console.log(result));\n      /*web3.eth.personal\n        .sign(\n          web3.utils.utf8ToHex(\"Hello world\"),\n          accounts[0]\n        )\n        .then(console.log);*/\n    } else {\n      setFieldsModal({\n        success: \"false\",\n        danger: \"true\",\n        title: \"No Metamask Extension Founded\",\n        body: \"Please install Metamask extension\",\n        show: \"true\",\n        btnType: \"danger\"\n      });\n    }\n  }, [hasMetamask, web3.eth, web3.utils]);\n  console.log(\"A\", fieldsModal);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [fieldsModal !== undefined && /*#__PURE__*/_jsxDEV(Modal, {\n      setFieldsModal: setFieldsModal,\n      fieldsModal: fieldsModal\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Hero, {\n      size: \"fullheight\",\n      children: [/*#__PURE__*/_jsxDEV(Hero.Header, {\n        backgroundColor: \"primary\",\n        children: /*#__PURE__*/_jsxDEV(Container, {\n          my: 5,\n          display: \"flex\",\n          flexDirection: \"column\",\n          alignItems: \"center\",\n          justifyContent: \"center\",\n          children: [/*#__PURE__*/_jsxDEV(Image, {\n            src: logo,\n            size: 128\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Heading, {\n            textColor: \"white\",\n            children: \"Decentralized Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Heading, {\n            textColor: \"grey\",\n            subtitle: true,\n            size: 3,\n            children: \"Simple Login Demo with MetaMask\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Hero.Body, {\n        children: /*#__PURE__*/_jsxDEV(Container, {\n          display: \"flex\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n          children: /*#__PURE__*/_jsxDEV(Content, {\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              size: \"medium\",\n              loading: isLoading,\n              rounded: \"true\",\n              fullwidth: \"true\",\n              color: \"warning\",\n              onClick: handlerClik,\n              children: \"Login with MetaMask\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 121,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Hero.Footer, {\n        children: /*#__PURE__*/_jsxDEV(Footer, {\n          children: /*#__PURE__*/_jsxDEV(Container, {\n            children: /*#__PURE__*/_jsxDEV(Content, {\n              style: {\n                textAlign: \"center\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Decentralized Login Demo\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 139,\n                  columnNumber: 19\n                }, this), \" by\", \" \", /*#__PURE__*/_jsxDEV(\"a\", {\n                  href: \"https://www.francescoprimerano.it\",\n                  rel: \"noreferrer\",\n                  target: \"_blank\",\n                  children: \"Francesco Primerano\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 140,\n                  columnNumber: 19\n                }, this), \". The source code is licensed under\", /*#__PURE__*/_jsxDEV(\"a\", {\n                  href: \"http://opensource.org/licenses/mit-license.php\",\n                  children: [\" \", \"MIT\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 148,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 138,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"The repository of this project is avaiable on\", \" \", /*#__PURE__*/_jsxDEV(\"a\", {\n                  href: \"https://github.com/pf55351/dencentralizedLogin\",\n                  rel: \"noreferrer\",\n                  target: \"_blank\",\n                  children: \"github\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 155,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 153,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 137,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 98,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"17O/Ng8xEjstfbiEAr7N7lIh4FE=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/Users/francescoprimerano/Desktop/metamask-login/frontend/src/App.js"],"names":["useState","useCallback","Container","Heading","Content","Button","Image","Hero","Footer","Web3","Modal","App","isLoading","setIsLoading","ethAddress","setEthAddress","fieldsModal","setFieldsModal","undefined","web3","givenProvider","hasMetamask","provider","currentProvider","window","ethereum","isMetaMask","console","log","handlerClik","e","preventDefault","enable","accounts","eth","getAccounts","sendAsync","method","params","utils","utf8ToHex","from","_err","result","error","success","danger","title","body","show","btnType","logo","textAlign"],"mappings":"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","sourcesContent":["import { useState, useCallback } from \"react\";\nimport \"bulma/css/bulma.min.css\";\nimport {\n  Container,\n  Heading,\n  Content,\n  Button,\n  Image,\n} from \"react-bulma-components\";\nimport Hero from \"react-bulma-components/esm/components/hero\";\nimport Footer from \"react-bulma-components/cjs/components/footer\";\nimport logo from \"./metamask.svg\";\nimport Web3 from \"web3\";\nimport Modal from \"./Modal\";\n\nfunction App() {\n  const [isLoading, setIsLoading] = useState(false);\n  const [ethAddress, setEthAddress] = useState(\"\");\n  const [fieldsModal, setFieldsModal] = useState(undefined);\n\n  let web3 = new Web3(Web3.givenProvider);\n  const hasMetamask = () => {\n    const provider = web3.currentProvider;\n    if (provider && provider === window.ethereum && provider.isMetaMask) {\n      console.log(\"MetaMask is installed!\");\n      return true;\n    } else {\n      return false;\n    }\n  };\n\n  /*\n  const handlerClik =  useCallback(async(e) => {\n    e.preventDefault();\n    if (hasMetamask()) {\n      console.log(\"OK METAMASK\");\n      console.log(web3.eth.accounts[0]);\n      const accounts = await web3.eth.getAccounts()\n      console.log(accounts[0])\n      web3.eth.personal\n        .sign(\n          web3.utils.utf8ToHex(\"Hello world\"),\n          \"0x11f4d0A3c12e86B4b5F39B213F7E19D048276DAe\",\n          \"test password!\"\n        )\n        .then(console.log);\n    } else {\n      setFieldsModal({\n        success: \"false\",\n        danger: \"true\",\n        title: \"No Metamask Extension Founded\",\n        body: \"Please install Metamask extension\",\n        show: \"true\",\n        btnType: \"danger\",\n      });\n    }\n  }, []);\n  */\n\n  const handlerClik = useCallback(async (e) => {\n    e.preventDefault();\n    if (hasMetamask()) {\n      window.ethereum.enable\n      const accounts = await web3.eth.getAccounts()\n      console.log(accounts);\n      // equivalente di web3.eth.personal.sign\n      // web3.eth.personal.sign chiama questa fx\n      window.ethereum.sendAsync(\n        {\n          method: 'personal_sign',\n          params: [web3.utils.utf8ToHex('Hello world'), accounts[0]],\n          from: accounts[0]\n        },\n        (_err, { result }) => (_err ? console.error(_err) : console.log(result))\n      )\n\n      /*web3.eth.personal\n        .sign(\n          web3.utils.utf8ToHex(\"Hello world\"),\n          accounts[0]\n        )\n        .then(console.log);*/\n    } else {\n      setFieldsModal({\n        success: \"false\",\n        danger: \"true\",\n        title: \"No Metamask Extension Founded\",\n        body: \"Please install Metamask extension\",\n        show: \"true\",\n        btnType: \"danger\",\n      });\n    }\n  }, [hasMetamask, web3.eth, web3.utils]);\n\n  console.log(\"A\", fieldsModal);\n\n  return (\n    <div>\n      {fieldsModal !== undefined && (\n        <Modal setFieldsModal={setFieldsModal} fieldsModal={fieldsModal} />\n      )}\n      <Hero size=\"fullheight\">\n        <Hero.Header backgroundColor=\"primary\">\n          <Container\n            my={5}\n            display=\"flex\"\n            flexDirection=\"column\"\n            alignItems=\"center\"\n            justifyContent=\"center\"\n          >\n            <Image src={logo} size={128} />\n            <Heading textColor={\"white\"}>Decentralized Login</Heading>\n            <Heading textColor=\"grey\" subtitle size={3}>\n              Simple Login Demo with MetaMask\n            </Heading>\n          </Container>\n        </Hero.Header>\n        <Hero.Body>\n          <Container display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\n            <Content>\n              <Button\n                size=\"medium\"\n                loading={isLoading}\n                rounded=\"true\"\n                fullwidth=\"true\"\n                color=\"warning\"\n                onClick={handlerClik}\n              >\n                Login with MetaMask\n              </Button>\n            </Content>\n          </Container>\n        </Hero.Body>\n        <Hero.Footer>\n          <Footer>\n            <Container>\n              <Content style={{ textAlign: \"center\" }}>\n                <p>\n                  <strong>Decentralized Login Demo</strong> by{\" \"}\n                  <a\n                    href=\"https://www.francescoprimerano.it\"\n                    rel=\"noreferrer\"\n                    target=\"_blank\"\n                  >\n                    Francesco Primerano\n                  </a>\n                  . The source code is licensed under\n                  <a href=\"http://opensource.org/licenses/mit-license.php\">\n                    {\" \"}\n                    MIT\n                  </a>\n                </p>\n                <p>\n                  The repository of this project is avaiable on{\" \"}\n                  <a\n                    href=\"https://github.com/pf55351/dencentralizedLogin\"\n                    rel=\"noreferrer\"\n                    target=\"_blank\"\n                  >\n                    github\n                  </a>\n                </p>\n              </Content>\n            </Container>\n          </Footer>\n        </Hero.Footer>\n      </Hero>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}